\chapter{Evaluation}

The approach has been evaluated on two realistic datasets. The most important
questions are whether the direction of the necessary translation is correctly
identified and its scale decreasing with distance to the target.
For both sets of images, the ground-truth translation between each image and the
first frame has been measured with centimetre accuracy, while the ground-truth
rotation has been estimated from manually labeled correspondence as it is
difficult to measure without the proper instruments. Since for the case of
noise-free correspondences in a non-degenerate configuration, relative pose
estimation algorithms are mathematically correct, this has been deemed
sufficiently accurate to evaluate the procedure. For each image pair, 19--27
correspondences have been labeled, of which the majority is used for pose
recovery. For pose recovery, RANSAC is used in conjunction with the five-point
solver, a point is considered an inlier for a given essential matrix if its
distance to its epipolar line is no more than three pixels. These parameters
lead to the majority of points being inliers of the pose recovery, the few
outliers can be explained by imprecise labeling.

In both data sets, the translation was mostly in the horizontal direction and
along the optical axis; the vertical translation is thus neglected. Similarly,
rotation was applied mainly around the vertical axis.

In order to idealise the condition, the reference photograph has been used to
fill the role of the second frame for world scale computation. In reality, since
the reference location is unknown, the reference world scale is obtained from a
position somewhat off.

The following graphics illustrate three things
\begin{enumerate}
   \item The difference between the computed necessary rotation and the actually
      necessary one
   \item The difference in direction of the computed necessary translation and
      the actually necessary one
   \item The correlation between the true ratio of distances obtained by
      measuring camera movement and the average distance ratio computed with first
      and second (or in this case reference) frames, once based on manually
      labeled correspondences and thrice based on autmatic feature matching, at
      three different scales
\end{enumerate}

\section{Train Station Data Set}

A schematic bird's eye view of the captures is shown in \autoref{fig:train_data_scenario}.

\begin{figure}
   {\centering      
      \input{gfx/bahnhof_scene.tex}
      \caption{Schematic representation of the train data set. Lengths and angles are not
      precise.}
   \label{fig:train_data_scenario}}
\end{figure}
\autoref{tab:train_data} summarises the ground truth for the five images.

\subsection{Scale Estimation}

\autoref{fig:train_KAZE_dist_ratio} shows how the average distance of points to the first
frame's camera varies with the second image used for triangulation. The plot
illustrates that---especially at full resolution---the ratio based on feature
matching closely mirrors the real value. The difference increases with
decreasing image scale, but the the slope of the graphs is quite similar. This
shows that indeed with increasing distance to the first frame, the ratio
decreases, allowing a deduction as to how close the camera is to the target, at
least with respect to previous iterations. The situation is somewhat worse at
the smallest scale with the ratio between the fifth third and fourth images
barely decreasing.

\newcolumntype{m}{>{$}c<{$}}

\begin{table}
   \caption{Ground truth for the train data. Image 0 is the reference frame,
   translations and rotations are given as in \eqref{eq:camera_transform}.}
   \begin{tabular}{cmmm}
      \toprule
      Image        & \text{Translation to reference} & \text{Rotation to reference} & \text{ratio}\\
      number       & [x,y,z]                         & [\theta_x, \theta_y, \theta_z]
      \\
      \midrule
      0 & [0      , 0 , 0]      & [0        , 0       , 0]       & 1\\
      1 & [ .9053 , 0 , .4246 ] & [ -3.3779 , -9.3779 , 1.05121] & 3.8936\\
      2 & [ .9986 , 0 , .0512 ] & [ -1.3274 , -5.7134 , -.1884 ] & 1.6461\\
      3 & [ .9993 , 0 , .0361 ] & [ -1.7156 , -2.4761 , .3469  ] & 1.0965\\
      4 & [ .9950 , 0 , .0995 ] & [ .054606 , -4.4867 , .2452  ] & 1.0343\\
   \end{tabular}
   \label{tab:train_data}
\end{table}

\begin{figure}
   \begin{subfigure}{.5\linewidth}
      \centering      
         \input{gfx/train_KAZE_dist_ratio_plot.tex}
         \caption{Evolution of the distance ratio between images in the Train Station
         data set with KAZE features}
      \label{fig:train_KAZE_dist_ratio}
   \end{subfigure}
   \quad
   \begin{subfigure}{.5\linewidth}
      \centering      
         \input{gfx/train_SIFT_dist_ratio_plot.tex}
         \caption{Evolution of the distance ratio between images in the Train Station
         data set with SIFT features}
      \label{fig:train_SIFT_dist_ratio}
   \end{subfigure}
\end{figure}

\begin{figure}
   \begin{subfigure}{.5\linewidth}
      \centering      
      \input{gfx/train_KAZE_angles_plot_resize1.tex}
      \label{fig:train_KAZE_rotation_1}
      \caption{$s=1$}
   \end{subfigure}
   \quad
   \begin{subfigure}{.5\linewidth}
      \centering      
      \input{gfx/train_KAZE_angles_plot_resize2.tex}
      \label{fig:train_KAZE_rotation_2}
      \caption{$s=2$}
   \end{subfigure}\\[3ex]
   \begin{subfigure}{\linewidth}
      \centering      
      \input{gfx/train_KAZE_angles_plot_resize4.tex}
      \label{fig:train_KAZE_rotation_4}
      \caption{$s=4$}
   \end{subfigure}

   \caption{Angles of rotation relative to reference with
   KAZE features on full, quater and sixteenth resolution}
\end{figure}

\begin{figure}
   \begin{subfigure}{.5\linewidth}
      \centering      
      \input{gfx/train_SIFT_angles_plot_resize1.tex}
      \label{fig:train_SIFT_rotation_1}
      \caption{$s=1$}
   \end{subfigure}
   \quad
   \begin{subfigure}{.5\linewidth}
      \centering      
      \input{gfx/train_SIFT_angles_plot_resize2.tex}
      \label{fig:train_SIFT_rotation_2}
      \caption{$s=2$}
   \end{subfigure}\\[3ex]
   \begin{subfigure}{\linewidth}
      \centering      
      \input{gfx/train_SIFT_angles_plot_resize4.tex}
      \label{fig:train_SIFT_rotation_4}
      \caption{$s=4$}
   \end{subfigure}

   \caption{Angles of rotation relative to reference with
   SIFT features on full, quater and sixteenth resolution}
\end{figure}

The deviation of computed necessary translation and actually necessary
translation measured in degrees is shown in \autoref{train_direction}.
\begin{figure}
   \begin{subfigure}{.5\linewidth}
      \centering      
      \input{gfx/train_KAZE_direction.tex}
      \caption{Angular difference between necessary translation and algorithmic
      estimate based on KAZE.}
      \label{fig:train_KAZE_direction}
   \end{subfigure}
   \begin{subfigure}{.5\linewidth}
      \centering      
      \input{gfx/train_SIFT_direction.tex}
      \caption{Angular difference between necessary translation and algorithmic
      estimate based on SIFT.}
      \label{fig:train_SIFT_direction}
   \end{subfigure}
   \label{fig:train_direction}
\end{figure}

\FloatBarrier

\section{Manor Data Set}

The schematic positions for the seven manor captures (including reference
photograph) are shown in \autoref{fig:manor_data_scenario}. In contrast to the
train station, there is prominent movement along the optical axis.

\begin{figure}
   {\centering      
      \input{gfx/manor_scene.tex}
      \caption{Schematic representation of the manor data set. Lengths and angles are not
      precise.}
   \label{fig:manor_data_scenario}}
\end{figure}

\begin{table}
   \caption{Ground truth for the manor data. Image 0 is the reference frame,
   translations and rotations are given as in \eqref{eq:camera_transform}.}
   \begin{tabular}{cmmm}
      \toprule
      Image        & \text{Translation to reference} & \text{Rotation to reference} & \text{ratio}\\
      number       & [x,y,z]                         & [\theta_x, \theta_y, \theta_z]
      \\
      \midrule
      0 & [0       , 0  , 0]        & [0 , 0        , 0]                & 1      \\
      1 & [ 1      , 0  , 0       ] & [ -1.7857   , -5.4827  , 2.1073 ] & 1.1401  \\
      2 & [ 0.8944 , 0. , 0.4472  ] & [ -2.1428   , -6.5773  , 1.6584 ] & 1.3437  \\
      3 & [ 0.7071 , 0. , 0.7071  ] & [ 0.7263    , -5.0686  , 2.6176 ] & 1.3254  \\
      4 & [ 0.8479 , 0. , -0.5299 ] & [ -1.4146   , -10.7998 , 2.2250 ] & 1.5168  \\
      5 & [ 0.9284 , 0. , 0.3713  ] & [ -0.1887   , -16.6670 , 1.2211 ] & 2.5495  \\
      6 & [ 0.9363 , 0. , -0.3511 ] & [ -0.8725   , -18.0933 , 1.5385 ] & 2.0155  \\
   \end{tabular}
   \label{tab:manor_data}
\end{table}

\begin{figure}
   {\centering      
      \input{gfx/manor_KAZE_dist_ratio_plot.tex}
      \caption{Evolution of the distance ratio between images in the Manor Station
      data set with KAZE features}
   \label{fig:manor_KAZE_dist_ratio}}
\end{figure}

\begin{figure}
   {\centering      
      \input{gfx/manor_SIFT_dist_ratio_plot.tex}
      \caption{Evolution of the distance ratio between images in the Manor Station
      data set with SIFT features}
   \label{fig:manor_SIFT_dist_ratio}}
\end{figure}

\begin{figure}
   \begin{subfigure}{.5\linewidth}
      \centering      
      \input{gfx/manor_KAZE_angles_plot_resize1.tex}
      \label{fig:manor_KAZE_rotation_1}
      \caption{$s=1$}
   \end{subfigure}
   \quad
   \begin{subfigure}{.5\linewidth}
      \centering      
      \input{gfx/manor_KAZE_angles_plot_resize2.tex}
      \label{fig:manor_KAZE_rotation_2}
      \caption{$s=2$}
   \end{subfigure}\\[3ex]
   \begin{subfigure}{\linewidth}
      \centering      
      \input{gfx/manor_KAZE_angles_plot_resize4.tex}
      \label{fig:manor_KAZE_rotation_4}
      \caption{$s=4$}
   \end{subfigure}

   \caption{Angles of rotation relative to reference with
   KAZE features on full, quater and sixteenth resolution}
\end{figure}

\begin{figure}
   \begin{subfigure}{.5\linewidth}
      \centering      
      \input{gfx/manor_SIFT_angles_plot_resize1.tex}
      \label{fig:manor_SIFT_rotation_1}
      \caption{$s=1$}
   \end{subfigure}
   \quad
   \begin{subfigure}{.5\linewidth}
      \centering      
      \input{gfx/manor_SIFT_angles_plot_resize2.tex}
      \label{fig:manor_SIFT_rotation_2}
      \caption{$s=2$}
   \end{subfigure}\\[3ex]
   \begin{subfigure}{\linewidth}
      \centering      
      \input{gfx/manor_SIFT_angles_plot_resize4.tex}
      \label{fig:manor_SIFT_rotation_4}
      \caption{$s=4$}
   \end{subfigure}

   \caption{Angles of rotation relative to reference with
   SIFT features on full, quater and sixteenth resolution}
\end{figure}

\begin{figure}
   \begin{subfigure}{.5\linewidth}
      \centering      
      \input{gfx/manor_KAZE_direction.tex}
      \caption{Angular difference between necessary translation and algorithmic
      estimate based on KAZE.}
      \label{fig:manor_KAZE_direction}
   \end{subfigure}
   \begin{subfigure}{.5\linewidth}
      \centering      
      \input{gfx/manor_SIFT_direction.tex}
      \caption{Angular difference between necessary translation and algorithmic
      estimate based on SIFT.}
      \label{fig:manor_SIFT_direction}
   \end{subfigure}
   \label{fig:manor_direction}
\end{figure}
